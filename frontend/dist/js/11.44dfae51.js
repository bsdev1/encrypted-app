"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[11],{4011:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var n=s(1653),i=s(4562),a=s(7394),r=s(7808),d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"message__content pr-7"},[t("div",[e._v(" by "),t("b",[e._v(e._s(e.username))]),e._v(" - "+e._s(e.$getNormalizedDate(e.createdAt))+" "),e.edited?t("div",{staticClass:"text-caption grey--text ml-2 d-inline pb-1"},[e._v(" (edited) ")]):e._e()]),e.currentEditedMessageId==e.id?t("div",{staticClass:"mt-3"},[t(a.cu,[e.editMessageError?t(n.Z,{attrs:{type:"error",color:"red",dense:""}},[e._v(" "+e._s(e.editMessageError)+" ")]):e._e()],1),t("form",{staticClass:"d-flex",on:{submit:function(t){return t.preventDefault(),e.finishEditMessage(e.id)}}},[t(r.Z,{attrs:{height:"40",label:"Edit Message",solo:"",placeholder:"Type In Your Edit Message","hide-details":"",dense:""},model:{value:e.editMessageContent,callback:function(t){e.editMessageContent=t},expression:"editMessageContent"}}),t(i.Z,{staticClass:"finish__edit__btn ml-4",attrs:{type:"submit",loading:e.applyingChanges}},[t("mdicon",{attrs:{name:"check"}})],1)],1)],1):t("div",{staticClass:"message__content",domProps:{innerHTML:e._s(e.$sanitizeHTML(e.$anchors({input:e.content,options:{attributes:{target:"_blank"}}})))}})])},o=[],l=s(629),c=s(3214),g={name:"MessageContent",props:{id:String,username:String,createdAt:String},data(){return{content:"",editMessageContent:"",edited:!1,editMessageError:null,applyingChanges:!1}},computed:(0,l.rn)(["currentEditedMessageId","messages","socket"]),created(){const{content:e,edited:t}=this.messages.find((e=>e.id==this.id));this.editMessageContent=e,this.content=e,this.edited=t},methods:{async finishEditMessage(e){let{editMessageContent:t,handleEditMessage:s,content:n,setCurrentEditedMessageId:i,setSendMessageError:a,socket:r}=this;if(a(null),t==n)return this.editMessageError=null,i(null),this.content=t;if(!t?.trim())return this.editMessageError="Edit message cannot be empty.";const d=localStorage.getItem("key");this.applyingChanges=!0;const{error:o}=await s({id:e,editMessageContent:(0,c.HI)(t,d)});if(this.applyingChanges=!1,o)return this.editMessageError=o;i(null),this.content=t,this.editActive=!1,this.editMessageError=null,this.edited=!0,this.$notify({text:"Successfully edited a message.",type:"success"}),r.emit("editedMessage",{id:e,newContent:(0,c.HI)(t,d)})},...(0,l.nv)(["handleEditMessage"]),...(0,l.OI)(["setCurrentEditedMessageId","setSendMessageError"])}},u=g,h=s(1001),M=(0,h.Z)(u,d,o,!1,null,"1790faae",null),p=M.exports}}]);
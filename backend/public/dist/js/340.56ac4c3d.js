"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[340],{7340:function(e,t,s){s.r(t),s.d(t,{default:function(){return M}});var n=s(1653),i=s(4562),a=s(7394),r=s(7864),d=function(){var e=this,t=e._self._c;return e.currentEditedMessage==e.id?t("div",{staticClass:"mt-3"},[t(a.cu,[e.editMessageError?t(n.Z,{attrs:{type:"error",color:"red",dense:""}},[e._v(e._s(e.editMessageError))]):e._e()],1),t("form",{staticClass:"d-flex",on:{submit:function(t){return t.preventDefault(),e.finishEditMessage(e.id)}}},[t(r.Z,{attrs:{height:"40",label:"Edit Message",solo:"",placeholder:"Type In Your Edit Message","hide-details":"",dense:""},model:{value:e.editMessageContent,callback:function(t){e.editMessageContent=t},expression:"editMessageContent"}}),t(i.Z,{staticClass:"finish__edit__btn ml-4",attrs:{type:"submit",loading:e.applyingChanges}},[t("mdicon",{attrs:{name:"check"}})],1)],1)],1):t("div",{staticClass:"message__content"},[e._v(" "+e._s(e.messageContent)+" ")])},o=[],g=s(629),l=s(3214),c={name:"MessageContent",props:{id:String,content:String},data(){return{messageContent:this.content,editMessageContent:this.content,editMessageError:null,applyingChanges:!1}},methods:{async finishEditMessage(e){let{editMessageContent:t,messageContent:s,messages:n,handleEditMessage:i,setCurrentEditedMessage:a,setMessages:r}=this;if(t==s)return this.editMessageError=null,a(null),this.messageContent=t;if(!t?.trim())return this.editMessageError="Edit message cannot be empty.";const d=localStorage.getItem("key");this.applyingChanges=!0;const{error:o}=await i({id:e,editMessageContent:(0,l.HI)(t,d)});if(this.applyingChanges=!1,o)return this.editMessageError=o;a(null),this.messageContent=t,this.editActive=!1,this.editMessageError=null,r(n.map((t=>t.id==e?{...t,edited:!0}:t))),this.$emit("changeEdit"),this.$notify({text:"Successfully edited a message.",type:"success"}),this.socket.emit("editedMessage",{id:e,newContent:(0,l.HI)(t,d)})},...(0,g.nv)(["handleEditMessage"]),...(0,g.OI)(["setCurrentEditedMessage","setMessages"])},computed:{...(0,g.rn)(["currentEditedMessage","messages","socket"])}},u=c,h=s(1001),m=(0,h.Z)(u,d,o,!1,null,"3c77be88",null),M=m.exports}}]);
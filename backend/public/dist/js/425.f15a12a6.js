(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[425],{9425:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return M}});var n=i(4562),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"message pr-4 py-2"},[e("div",[t._v("by "),e("b",[t._v(t._s(t.author.username))]),t._v(" - "+t._s(t.ago(t.createdAt)))]),t._v(" "+t._s(t.content)),e("br"),t.files.length?e("div",{staticClass:"d-flex flex-wrap mt-2"},t._l(t.files,(function({src:i,name:n,type:o},r){return e("div",{key:r},[o.startsWith("image")?e("img",{class:r+1>1?"ml-4 mb-3":"mb-3",staticStyle:{"max-width":"100%"},attrs:{src:i,height:"150"}}):o.startsWith("video")?e("video",{staticClass:"ml-3 mb-3",staticStyle:{"max-width":"100%"},attrs:{controls:"",height:"200"}},[e("source",{attrs:{src:i}})]):e("div",{staticClass:"ml-6 mb-3"},[e("a",{attrs:{href:i,target:"_blank"}},[t._v(t._s(n))])])])})),0):e("div",{staticClass:"mt-2"},[t._l(t.fileDescriptions,(function({fileName:i,fileType:n,fileSize:o},r){return e("div",{key:r,staticClass:"text-caption grey--text mb-1"},[t._v(" "+t._s(i)+" ("+t._s(n)+", "+t._s(t.filesize(o))+") ")])})),t.filesCount?e(n.Z,{staticClass:"my-2",attrs:{loading:t.fetchingFiles},on:{click:function(e){return t.showFiles(t.id)}}},[t._v("Show "),t.filesCount>1?e("b",[t._v(t._s(t.filesCount)+" Files")]):e("span",[t._v("File")]),t._v(" ("+t._s(t.filesize(t.totalSize))+")")]):t._e()],2)])},r=[],s=["second","minute","hour","day","week","month","year"];function a(t,e){if(0===e)return["just now","right now"];var i=s[Math.floor(e/2)];return t>1&&(i+="s"),[t+" "+i+" ago","in "+t+" "+i]}var l=["秒","分钟","小时","天","周","个月","年"];function c(t,e){if(0===e)return["刚刚","片刻后"];var i=l[~~(e/2)];return[t+" "+i+"前",t+" "+i+"后"]}var u={},f=function(t,e){u[t]=e},d=function(t){return u[t]||u["en_US"]},b=[60,60,24,7,365/7/12,12];function h(t){return t instanceof Date?t:!isNaN(t)||/^\d+$/.test(t)?new Date(parseInt(t)):(t=(t||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(t))}function v(t,e){var i=t<0?1:0;t=Math.abs(t);for(var n=t,o=0;t>=b[o]&&o<b.length;o++)t/=b[o];return t=Math.floor(t),o*=2,t>(0===o?9:1)&&(o+=1),e(t,o,n)[i].replace("%s",t.toString())}function p(t,e){var i=e?h(e):new Date;return(+i-+h(t))/1e3}var m=function(t,e,i){var n=p(t,i&&i.relativeDate);return v(n,d(e))};f("en_US",a),f("zh_CN",c);var y=i(629),g=i(6755),_=i.n(g),w={name:"Message",props:{message:Object},data(){return{...this.message,fetchingFiles:!1}},methods:{filesize:_(),ago:t=>m(t),async showFiles(t){this.fetchingFiles=!0;const e=localStorage.getItem("key"),i=await crypto.subtle.importKey("jwk",{kty:"oct",k:e,alg:"A256GCM",ext:!0},{name:"AES-GCM"},!1,["encrypt","decrypt"]),n=await this.handleShowFiles({messageId:t,importedKey:i,key:e});this.fetchingFiles=!1,this.files=n},...(0,y.nv)(["handleShowFiles"])},computed:{totalSize(){return this.fileDescriptions.reduce(((t,{fileSize:e})=>t+e),0)}}},S=w,B=i(1001),k=(0,B.Z)(S,o,r,!1,null,null,null),M=k.exports},6755:function(t){
/*!
 2022 Jason Mulligan <jason.mulligan@avoidwork.com>
 @version 9.0.11
*/
!function(e,i){t.exports=i()}(0,(function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e="array",i="bits",n="byte",o="bytes",r="",s="exponent",a="function",l="iec",c="Invalid number",u="Invalid rounding method",f="jedec",d="object",b=".",h="round",v="kbit",p="string",m={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function y(y){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=g.bits,w=void 0!==_&&_,S=g.pad,B=void 0!==S&&S,k=g.base,M=void 0===k?-1:k,C=g.round,x=void 0===C?2:C,z=g.locale,F=void 0===z?r:z,N=g.localeOptions,T=void 0===N?{}:N,j=g.separator,E=void 0===j?r:j,D=g.spacer,Z=void 0===D?" ":D,G=g.symbols,I=void 0===G?{}:G,K=g.standard,P=void 0===K?r:K,$=g.output,Y=void 0===$?p:$,A=g.fullform,U=void 0!==A&&A,L=g.fullforms,O=void 0===L?[]:L,W=g.exponent,q=void 0===W?-1:W,H=g.roundingMethod,J=void 0===H?h:H,Q=g.precision,R=void 0===Q?0:Q,V=q,X=Number(y),tt=[],et=0,it=r;-1===M&&0===P.length?(M=10,P=f):-1===M&&P.length>0?M=(P=P===l?l:f)===l?2:10:P=10===(M=2===M?2:10)||P===f?f:l;var nt=10===M?1e3:1024,ot=!0===U,rt=X<0,st=Math[J];if(isNaN(y))throw new TypeError(c);if(t(st)!==a)throw new TypeError(u);if(rt&&(X=-X),(-1===V||isNaN(V))&&(V=Math.floor(Math.log(X)/Math.log(nt)))<0&&(V=0),V>8&&(R>0&&(R+=8-V),V=8),Y===s)return V;if(0===X)tt[0]=0,it=tt[1]=m.symbol[P][w?i:o][V];else{et=X/(2===M?Math.pow(2,10*V):Math.pow(1e3,V)),w&&(et*=8)>=nt&&V<8&&(et/=nt,V++);var at=Math.pow(10,V>0?x:0);tt[0]=st(et*at)/at,tt[0]===nt&&V<8&&-1===q&&(tt[0]=1,V++),it=tt[1]=10===M&&1===V?w?v:"kB":m.symbol[P][w?i:o][V]}if(rt&&(tt[0]=-tt[0]),R>0&&(tt[0]=tt[0].toPrecision(R)),tt[1]=I[tt[1]]||tt[1],!0===F?tt[0]=tt[0].toLocaleString():F.length>0?tt[0]=tt[0].toLocaleString(F,T):E.length>0&&(tt[0]=tt[0].toString().replace(b,E)),B&&!1===Number.isInteger(tt[0])&&x>0){var lt=E||b,ct=tt[0].toString().split(lt),ut=ct[1]||r,ft=ut.length,dt=x-ft;tt[0]="".concat(ct[0]).concat(lt).concat(ut.padEnd(ft+dt,"0"))}return ot&&(tt[1]=O[V]?O[V]:m.fullform[P][V]+(w?"bit":n)+(1===tt[0]?r:"s")),Y===e?tt:Y===d?{value:tt[0],symbol:tt[1],exponent:V,unit:it}:tt.join(Z)}return y.partial=function(t){return function(e){return y(e,t)}},y}))}}]);
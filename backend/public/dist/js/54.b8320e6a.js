"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[54],{8054:function(e,s,t){t.r(s),t.d(s,{default:function(){return _}});var r=t(1653),n=t(4562),a=t(3305),o=t(7394),l=t(7864),i=function(){var e=this,s=e._self._c;return s("div",[e.loading?s("div",{staticClass:"loader d-flex flex-column"},[s("h3",[e._v("Loading...")]),s(a.Z,{staticClass:"mt-8",attrs:{size:"70",width:"5",indeterminate:""}})],1):e.user?e._e():s("form",{staticClass:"mx-auto auth-form px-5",on:{submit:function(s){return s.preventDefault(),e.login.apply(null,arguments)}}},[s("h2",{staticClass:"mb-5 mt-8"},[e._v("Log In")]),s(o.cu,[e.error?s(r.Z,{staticClass:"alert_error mb-5",attrs:{type:"error",color:"red"}},[e._v(e._s(e.error))]):e._e()],1),s(o.cu,[e.newUser?s(r.Z,{staticClass:"mb-5",attrs:{type:"success"}},[e._v("Hello, "),s("b",[e._v(e._s(e.newUser))]),e._v("! You can log in now.")]):e._e()],1),s(l.Z,{attrs:{label:"Username",solo:"",placeholder:"Type In Your Username"},model:{value:e.username,callback:function(s){e.username=s},expression:"username"}}),s(l.Z,{attrs:{label:"Password",solo:"",type:"password",placeholder:"Type In Your Password"},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}}),s("div",{staticClass:"d-flex"},[s(n.Z,{attrs:{rounded:"",type:"submit",loading:e.loggingIn}},[e._v("Log In")]),s("router-link",{staticClass:"ml-auto text-decoration-none",attrs:{to:e.loggingIn?"":"/register"}},[s(n.Z,{attrs:{rounded:""}},[e._v("Register")])],1)],1)],1)])},u=[],d=t(629),c=t(6132),g=t(9669),p=t.n(g);const m=p().create({baseURL:"https://e2ee-bs-app.cloud/api",withCredentials:!0});var h={name:"Login",data:()=>({username:null,password:null,error:null,loggingIn:!1}),async created(){if(this.user){const{data:{user:e}}=await m.get("/");if(e)return c.Z.push("/");this.setUser(null),this.setSocket(null)}this.setLoading(!1)},methods:{async login(){this.setNewUser(null);const{username:e,password:s,handleLogin:t}=this;if(!e?.trim()||!s?.trim())return this.error="Fill in all fields!";this.loggingIn=!0;const{errorMessage:r}=await t({username:e,password:s});this.loggingIn=!1,this.error=r},...(0,d.nv)(["handleLogin"]),...(0,d.OI)(["setNewUser","setLoading","setUser","setSocket"])},computed:{...(0,d.rn)(["newUser","user","loading"])}},f=h,w=t(1001),v=(0,w.Z)(f,i,u,!1,null,null,null),_=v.exports}}]);
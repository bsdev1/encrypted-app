"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[649],{1649:function(e,s,t){t.r(s),t.d(s,{default:function(){return C}});var r=t(1653),n=t(4562),a=t(3305),o=t(7394),l=t(7864),i=function(){var e=this,s=e._self._c;return s("div",[e.loading?s("div",{staticClass:"loader d-flex flex-column"},[s("h3",[e._v("Loading...")]),s(a.Z,{staticClass:"mt-8",attrs:{size:"70",width:"5",indeterminate:""}})],1):e.user?e._e():s("form",{staticClass:"mx-auto auth-form px-5",on:{submit:function(s){return s.preventDefault(),e.login.apply(null,arguments)}}},[s("h2",{staticClass:"mb-5 mt-8"},[e._v("Log In")]),s(o.cu,[e.error?s(r.Z,{staticClass:"alert_error mb-5",attrs:{type:"error",color:"red"}},[e._v(e._s(e.error))]):e._e()],1),s(o.cu,[e.newUser?s(r.Z,{staticClass:"mb-5",attrs:{type:"success"}},[e._v("Hello, "),s("b",[e._v(e._s(e.newUser))]),e._v("! You can log in now.")]):e._e()],1),s(l.Z,{attrs:{label:"Username",solo:"",placeholder:"Type In Your Username"},model:{value:e.username,callback:function(s){e.username=s},expression:"username"}}),s(l.Z,{attrs:{label:"Password",solo:"","hide-details":"",type:"password",placeholder:"Type In Your Password"},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}}),s("hcaptcha",{staticClass:"mt-5 mb-3",attrs:{sitekey:e.process.env.SITE_KEY},on:{verify:e.verifyCaptcha}}),s("div",{staticClass:"d-flex"},[s(n.Z,{attrs:{rounded:"",type:"submit",loading:e.loggingIn}},[e._v("Log In")]),s("router-link",{staticClass:"ml-auto text-decoration-none",attrs:{to:e.loggingIn?"":"/register"}},[s(n.Z,{attrs:{rounded:""}},[e._v("Register")])],1)],1)],1)])},u=[],c=t(629),d=t(6132),p=t(9669),h=t.n(p),g=t(2971),m=t.n(g);const f=h().create({baseURL:"https://e2ee-bs-app.cloud/api",withCredentials:!0});var v={name:"Login",components:{hcaptcha:m()},data:()=>({username:null,password:null,error:null,token:null,loggingIn:!1}),async created(){if(this.user){const{data:{user:e}}=await f.get("/");if(e)return d.Z.push("/");this.setUser(null),this.setSocket(null)}this.setLoading(!1)},methods:{async login(){this.setNewUser(null);const{username:e,password:s,token:t,handleLogin:r}=this;if(!e?.trim()||!s?.trim())return this.error="Fill in all fields!";if(!t?.trim())return this.error="Captcha cannot be empty!";this.loggingIn=!0;const{errorMessage:n}=await r({username:e,password:s,token:t});this.loggingIn=!1,this.error=n},verifyCaptcha(e){this.token=e,this.error=null},...(0,c.nv)(["handleLogin"]),...(0,c.OI)(["setNewUser","setLoading","setUser","setSocket"])},computed:{...(0,c.rn)(["newUser","user","loading"])}},w=v,_=t(1001),b=(0,_.Z)(w,i,u,!1,null,null,null),C=b.exports}}]);